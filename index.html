<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>제로타이핑 · One Page Builder</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<!-- polyfill 제거: 네트워크 오류로 인해 로드 실패 -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    },
    startup: {
      pageReady: () => {
        return MathJax.startup.defaultPageReady();
      }
    }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="app">
    <!-- Top -->
    <header class="topbar">
      <div class="brand">
        <div class="logo">Z</div>
        <div>
          <div class="t1">
            제로타이핑
            <span style="
              font-size: 10px;
              font-weight: 700;
              color: #fff;
              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
              padding: 2px 6px;
              border-radius: 4px;
              margin-left: 6px;
              vertical-align: middle;
            ">BETA</span>
          </div>
          <div class="t2">클릭만으로 만드는 학습지</div>
        </div>
      </div>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLScjQxJ_eOTmK74hgGkGCkqUaBz9cbGIku11_CbRAiXBUzfhSQ/viewform?usp=publish-editor"
         target="_blank"
         class="feedback-button"
         style="
           display: flex;
           align-items: center;
           gap: 8px;
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           color: white;
           padding: 10px 20px;
           border-radius: 8px;
           text-decoration: none;
           font-weight: 600;
           font-size: 14px;
           transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
           box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
           white-space: nowrap;
           position: relative;
         "
         onmouseover="this.style.transform='translateY(-4px) scale(1.02)'; this.style.boxShadow='0 8px 20px rgba(102, 126, 234, 0.5)'; this.style.background='linear-gradient(135deg, #7c8ff5 0%, #8b5dba 100%)'"
         onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 2px 8px rgba(102, 126, 234, 0.3)'; this.style.background='linear-gradient(135deg, #667eea 0%, #764ba2 100%)'">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="flex-shrink: 0;">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 17L12 22L22 17" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 12L12 17L22 12" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>제로타이핑 평가하고 한 달 무료 이용권 받기 🎁</span>
      </a>
          <div class="user" id="userSection">
            <!-- 초기 버튼들 -->
            <div class="auth-buttons" id="authButtons">
              <button id="showLoginFormBtn" class="login-btn">로그인</button>
              <button id="showRegisterFormBtn" class="register-btn">회원가입</button>
            </div>

            <!-- 사용자 정보 -->
            <div class="user-info" id="userInfo" style="display: none;">
              <div class="avatar" id="userAvatar">김</div>
              <span id="userName">김태훈</span>
              <span id="userRole">선생님</span>
              <button id="logoutBtn">로그아웃</button>
            </div>
          </div>
    </header>

    <!-- Main split -->
    <main class="main">
      <!-- Left: Explorer -->
      <section class="explorer">
        <div class="ex-card ex-dashboard" id="dashboard">
          <!-- 로그인 안내 오버레이 -->
          <div class="login-required-overlay" id="loginRequiredOverlay" style="display: none;">
            <div class="login-message">
              <div class="login-icon">🔒</div>
              <h3>로그인이 필요합니다</h3>
              <p>파일을 업로드하고 관리하려면<br>로그인해주세요</p>
              <button class="login-overlay-btn" onclick="document.getElementById('showLoginFormBtn').click()">로그인하기</button>
            </div>
          </div>
          <!-- 업로드 -->
          <div class="ex-upload" style="padding:12px 12px 4px">
            <div class="upload-tile" id="uploadTile">
              <div class="upload-icon">↑</div>
              <div class="upload-title">새 파일 업로드</div>
              <input type="file" id="fileInput" accept=".pdf" multiple style="display:none;">
              <div class="progress-container" id="progressContainer">
                <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                <div class="progress-text" id="progressText">업로드 중...</div>
              </div>
            </div>
            <div style="font-size: 11px; color: #94a3b8; text-align: center; margin-top: 6px; line-height: 1.4;">
              ※ 일부 개념 문제와 스캔본은 인식이 안 될 수도 있습니다.
            </div>
          </div>

          <!-- 용량바 -->
          <div class="ex-usage" style="padding:10px 12px 8px">
            <div class="usage-bar"><div class="usage-fill" id="usageFill"></div></div>
            <span class="usage-text" id="usageText">0GB / 0GB</span>
          </div>

          <!-- 파일/폴더 리스트 -->
          <div class="grid" style="border-top:1px solid #eef2f7; padding-top:8px">
            <div class="files-grid" id="fileGridBody"></div>
          </div>

          <!-- 툴바 -->
          <div class="ex-toolbar" style="border-top:1px solid #eef2f7">
            <span class="counter" id="selectionCounter">선택 0개</span>
            <div style="flex:1"></div>
            <button class="btn" id="renameBtn">이름 변경</button>
            <button class="btn danger" id="deleteBtn">삭제</button>
            <button class="btn primary" id="newFolderBtn">새 폴더</button>
          </div>
        </div>
      </section>

      <!-- Middle: Preview -->
      <section class="preview-wrap">
        <div class="preview-toolbar">
          <div class="preview-header">
            <h2 class="preview-title">문항 선택하기</h2>
          </div>
          <div class="tabs-container">
            <div class="tabs" id="problemTabs">
              <!-- 탭들이 여기에 동적으로 추가됩니다 -->
            </div>
            <div class="tab-controls">
              <!-- 모두 선택 기능 제거됨 -->
            </div>
          </div>
        </div>

        <div class="preview" id="problemsPreview">
          <div class="preview-column" id="column1">
            <!-- 문제가 동적으로 로드됩니다 -->
          </div>

          <div class="preview-column" id="column2">
            <!-- 문제가 동적으로 로드됩니다 -->
          </div>
        </div>
        <div class="note">※ 업로드하면 왼쪽 탐색기 현재 폴더에 추가됩니다.</div>
      </section>

      <!-- Resize Handle -->
      <div class="resize-handle" id="resizeHandle"></div>

      <!-- Right: Exam Preview -->
      <section class="exam-preview">
        <div class="exam-header">
          <h2>시험지 미리보기</h2>
          <div class="exam-controls">
            <button class="btn primary" id="generatePdfBtn">PDF 생성</button>
            <button class="btn ghost" id="clearExam">초기화</button>
            <button class="btn icon-btn" id="settingsBtn" title="설정">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"></path>
              </svg>
            </button>
          </div>
          
          <!-- PDF 생성 진행사항 표시 (기존 - 제거 예정) -->
          <div class="pdf-progress" id="pdfProgress" style="display: none;">
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">잠시만 기다려주세요...</div>
          </div>
        </div>
        <div class="exam-content">
          <div class="exam-stats">
            <div class="stat-item">
              <span class="stat-label">총 문항 수</span>
              <span class="stat-value" id="totalProblems">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">예상 시간</span>
              <span class="stat-value" id="estimatedTime">0분</span>
            </div>
          </div>
          <div class="exam-problems" id="examProblems">
            <div class="empty-state">
              <div class="empty-icon">📝</div>
              <p>왼쪽에서 문항을 선택하면 여기에 표시됩니다</p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- 모달 오버레이 -->
  <div class="modal-overlay" id="modalOverlay" style="display: none;"></div>

  <!-- 로그인 폼 -->
  <div class="auth-form" id="loginForm" style="display: none;">
    <h3>로그인</h3>
    <input type="email" id="loginEmail" placeholder="이메일" />
    <input type="password" id="loginPassword" placeholder="비밀번호" />
    <button id="loginBtn">로그인</button>
    <button id="showRegisterBtn" class="switch-btn">회원가입</button>
  </div>

  <!-- 회원가입 폼 -->
  <div class="auth-form" id="registerForm" style="display: none;">
    <h3>회원가입</h3>
    <input type="text" id="registerUsername" placeholder="사용자명" />
    <input type="email" id="registerEmail" placeholder="이메일" />
    <input type="password" id="registerPassword" placeholder="비밀번호" />
    <div class="role-selector">
      <button type="button" class="role-btn" data-role="teacher">선생님</button>
      <button type="button" class="role-btn" data-role="student">학생</button>
    </div>
    <button id="registerBtn">회원가입</button>
    <button id="showLoginBtn" class="switch-btn">로그인</button>
  </div>

  <!-- PDF 생성 모달 오버레이 -->
  <div class="pdf-overlay" id="pdfOverlay" style="display: none;">
    <div class="pdf-progress-modal">
      <div class="progress-spinner">
        <div class="spinner"></div>
      </div>
      <div class="progress-title" id="progressTitle">PDF 생성 중...</div>
      <div class="progress-bar-container">
        <div class="progress-bar-modal">
          <div class="progress-fill-modal" id="progressFillModal"></div>
        </div>
        <div class="progress-percentage" id="progressPercentage">0%</div>
      </div>
      <div class="progress-text-modal" id="progressTextModal">준비 중...</div>
      <div class="progress-details" id="progressDetails"></div>
    </div>
  </div>

  <!-- PDF 설정 모달 -->
  <div class="settings-modal-overlay" id="settingsModalOverlay" style="display: none;">
    <div class="settings-modal">
      <div class="settings-header">
        <h3>PDF 설정</h3>
        <button class="close-btn" id="closeSettingsBtn">×</button>
      </div>
      
      <div class="settings-content">
        <!-- 템플릿 선택 -->
        <div class="settings-section">
          <h4>템플릿 선택</h4>
          <div class="template-grid">
            <div class="template-card selected" data-template="exam1">
              <div class="template-preview">
                <div class="template-preview-actual">
                  <div class="actual-header">
                    <div class="actual-left">수학학원명</div>
                    <div class="actual-center">시험지</div>
                    <div class="actual-right">모의고사</div>
                  </div>
                  <div class="actual-info-row">
                    <div class="actual-info-item">이름</div>
                    <div class="actual-info-item">날짜</div>
                    <div class="actual-info-item">시간</div>
                    <div class="actual-info-item">단원</div>
                  </div>
                  <div class="actual-problems">
                    <div class="actual-problem-row">
                      <div class="actual-problem-number">1.</div>
                      <div class="actual-problem-content">
                        <div class="actual-math-line"></div>
                        <div class="actual-math-line short"></div>
                      </div>
                    </div>
                    <div class="actual-problem-row">
                      <div class="actual-problem-number">3.</div>
                      <div class="actual-problem-content">
                        <div class="actual-math-line"></div>
                        <div class="actual-choice">① ② ③ ④ ⑤</div>
                      </div>
                    </div>
                  </div>
                  <div class="actual-footer-notice">문항 추출기를 이용하여...</div>
                </div>
              </div>
              <div class="template-name">시험지 1</div>
              <div class="template-check">✓</div>
            </div>
            
            <div class="template-card disabled" data-template="exam2">
              <div class="template-preview">
                <div class="template-preview-blur">
                  <div class="blur-text">업데이트 예정</div>
                </div>
              </div>
              <div class="template-name">시험지 2</div>
              <div class="template-check">✓</div>
            </div>
            
            <div class="template-card disabled" data-template="mock">
              <div class="template-preview">
                <div class="template-preview-blur">
                  <div class="blur-text">업데이트 예정</div>
                </div>
              </div>
              <div class="template-name">모의고사</div>
              <div class="template-check">✓</div>
            </div>
          </div>
        </div>

        <!-- 정답/해설 여부 -->
        <div class="settings-section">
          <h4>정답/해설 여부</h4>
          <div class="answer-options">
            <div class="answer-option selected" data-answer-type="answers-only">
              <div class="option-text">정답</div>
            </div>
            <div class="answer-option" data-answer-type="answers-explanations">
              <div class="option-text">정답 + 해설</div>
            </div>
            <div class="answer-option" data-answer-type="answers-detailed">
              <div class="option-text">정답 + 자세한 해설</div>
            </div>
            <div class="answer-option" data-answer-type="none">
              <div class="option-text">없음</div>
            </div>
          </div>
        </div>
      </div>

      <div class="settings-footer">
        <button class="btn ghost" id="cancelSettingsBtn">취소</button>
        <button class="btn primary" id="applySettingsBtn">적용</button>
      </div>
    </div>
  </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="dashboard.js"></script>
<script src="app.js"></script>
</body>
</html>
